<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/tester/tester.js"></script>
<script src="../xceptor.js"></script>
<script>
XCeptor.when(/^/, /^\/api/, function(req, res) {
  res.status = 200;
  res.responseText = req.method;
  return false;
});

$.when(
  $.ajax({ method: 'get', url: '/api' }).then(function(method) {
    Tester.assert(method === 'GET', 'method must be GET');
  }),
  $.ajax({ method: 'post', url: '/api' }).then(function(method) {
    Tester.assert(method === 'POST', 'method must be POST');
  }),
  $.ajax({ method: 'delete', url: '/api' }).then(function(method) {
    Tester.assert(method === 'DELETE', 'method must be DELETE');
  }),
  $.ajax({ method: 'put', url: '/api' }).then(function(method) {
    Tester.assert(method === 'PUT', 'method must be PUT');
  }),
  $.ajax({ method: 'patch', url: '/api' }).then(function(method) {
    Tester.assert(method === 'PATCH', 'method must be PATCH');
  }),
  $.ajax({ method: 'head', url: '/api' }).then(function(response) {
    Tester.assert(response === void 0, 'response must be undefined');
  })
).then(function() {
  Tester.feedback(true);
}, function() {
  Tester.feedback(false);
});
</script>

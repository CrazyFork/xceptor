<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="xceptor.js"></script>
<script>
XCeptor.when('GET', '/', function(req, res) {
  console.log(1, res.responseText);
  res.responseText = 1;
}, function(req, res) {
  console.log(3, res.responseText);
  res.responseText++;
});

XCeptor.get('/', function(req, res) {
  console.log(2, res.responseText);
  res.responseText++;
  // 'thenable' can be supported
  return {then:function(f){
    setTimeout(function(){
      f(false);
    },1000)
  }};
}, function(req, res) {
  console.log(4, res.responseText);
  res.responseText += '';
  res.status = 200;
});

$.get('/')
  .done(function(e) {
    console.log('done', e);
  })
  .fail(function(e) {
    console.log('fail', e);
  });
</script>

